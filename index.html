<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>猪猪AI</title>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2c3e50;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            color: var(--dark);
            background-color: #f5f7fa;
        }
        h1 {
            color: var(--secondary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            text-align: center;
        }
        .container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            margin-bottom: 20px;
            transition: border 0.3s;
        }
        textarea:focus {
            border-color: var(--primary);
            outline: none;
        }
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        .control-group {
            background-color: var(--light);
            padding: 15px;
            border-radius: 6px;
        }
        .control-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            font-weight: bold;
            grid-column: span 2;
        }
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }
        .slider-container {
            margin-bottom: 15px;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 5px;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }
        .checkbox-group {
            margin-top: 15px;
        }
        .checkbox-item {
            margin-bottom: 8px;
        }
        .output-section {
            margin-top: 30px;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .output-box {
            padding: 20px;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #eee;
        }
        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .output-title {
            font-weight: bold;
            color: var(--secondary);
        }
        .output-content {
            min-height: 200px;
            line-height: 1.7;
        }
        .detection-score {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        .human-like {
            background-color: var(--success);
            color: white;
        }
        .ai-like {
            background-color: #e74c3c;
            color: white;
        }
        .uncertain {
            background-color: var(--warning);
            color: white;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0,0,0,.1);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h1>Stealth Academic Humanizer</h1>
    <div class="container">
        <p style="text-align: center; margin-bottom: 25px;">Transform AI-generated content into undetectable academic writing while preserving meaning and quality.</p>
        
        <div class="input-section">
            <textarea id="inputText" placeholder="Paste your AI-generated text here..."></textarea>
            
            <div class="controls">
                <div class="control-group">
                    <div class="control-title">Rephrasing Settings</div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Intensity: <span id="intensityValue">50%</span></span>
                            <span class="tooltip">?
                                <span class="tooltiptext">Higher values create more variation but may alter meaning</span>
                            </span>
                        </div>
                        <input type="range" id="intensitySlider" min="10" max="90" value="50">
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span>Academic Level: <span id="academicValue">Medium</span></span>
                        </div>
                        <input type="range" id="academicSlider" min="1" max="3" value="2">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-title">Stealth Enhancements</div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="hedgingCheck" checked>
                            <label for="hedgingCheck">Add academic hedging</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="variationCheck" checked>
                            <label for="variationCheck">Sentence structure variation</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="idiomsCheck">
                            <label for="idiomsCheck">Inject discipline-specific idioms</label>
                        </div>
                    </div>
                </div>
            </div>
            
            <button id="humanizeBtn">
                Humanize Text
                <span id="loadingIndicator" style="display: none;" class="loading"></span>
            </button>
        </div>
        
        <div class="output-section">
            <div class="comparison">
                <div class="output-box">
                    <div class="output-header">
                        <div class="output-title">Original Text</div>
                        <div id="originalScore" class="detection-score ai-like">AI: 92%</div>
                    </div>
                    <div id="originalOutput" class="output-content">(Your original text will appear here)</div>
                </div>
                
                <div class="output-box">
                    <div class="output-header">
                        <div class="output-title">Humanized Version</div>
                        <div id="humanizedScore" class="detection-score human-like">Human: 87%</div>
                    </div>
                    <div id="humanizedOutput" class="output-content">(Your humanized text will appear here)</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const inputText = document.getElementById('inputText');
        const intensitySlider = document.getElementById('intensitySlider');
        const intensityValue = document.getElementById('intensityValue');
        const academicSlider = document.getElementById('academicSlider');
        const academicValue = document.getElementById('academicValue');
        const humanizeBtn = document.getElementById('humanizeBtn');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const originalOutput = document.getElementById('originalOutput');
        const humanizedOutput = document.getElementById('humanizedOutput');
        const originalScore = document.getElementById('originalScore');
        const humanizedScore = document.getElementById('humanizedScore');

        // Academic level labels
        const academicLabels = ['Basic', 'Medium', 'Advanced'];

        // Event Listeners
        intensitySlider.addEventListener('input', function() {
            intensityValue.textContent = this.value + '%';
        });

        academicSlider.addEventListener('input', function() {
            academicValue.textContent = academicLabels[this.value - 1];
        });

        humanizeBtn.addEventListener('click', async function() {
            const text = inputText.value.trim();
            if (!text) {
                alert('Please enter some text to humanize.');
                return;
            }
            
            // Show loading state
            humanizeBtn.disabled = true;
            loadingIndicator.style.display = 'inline-block';
            
            // Display original text
            originalOutput.textContent = text;
            originalScore.textContent = 'AI: ' + (85 + Math.floor(Math.random() * 10)) + '%';
            originalScore.className = 'detection-score ai-like';
            
            // Clear previous output
            humanizedOutput.textContent = '';
            humanizedScore.textContent = 'Analyzing...';
            humanizedScore.className = 'detection-score uncertain';
            
            // Simulate API call delay
            setTimeout(() => {
                try {
                    // Get user settings
                    const intensity = intensitySlider.value / 100;
                    const academicLevel = academicSlider.value;
                    const useHedging = document.getElementById('hedgingCheck').checked;
                    const useVariation = document.getElementById('variationCheck').checked;
                    const useIdioms = document.getElementById('idiomsCheck').checked;
                    
                    // Process text
                    const humanized = advancedHumanizer(text, intensity, academicLevel, useHedging, useVariation, useIdioms);
                    
                    // Display results
                    humanizedOutput.textContent = humanized;
                    
                    // Simulate detection score (in real app, call an API)
                    const humanScore = 5 + Math.floor(intensity * 90); // More intensity = more "human"
                    const scoreText = humanScore > 70 ? 'Human: ' : 'AI: ';
                    humanizedScore.textContent = scoreText + humanScore + '%';
                    humanizedScore.className = humanScore > 70 ? 
                        'detection-score human-like' : 
                        (humanScore > 40 ? 'detection-score uncertain' : 'detection-score ai-like');
                    
                } catch (error) {
                    humanizedOutput.textContent = 'Error: ' + error.message;
                    humanizedScore.className = 'detection-score uncertain';
                    humanizedScore.textContent = 'Error';
                } finally {
                    // Reset loading state
                    humanizeBtn.disabled = false;
                    loadingIndicator.style.display = 'none';
                }
            }, 1500);
        });
        
        // Advanced Humanizer Algorithm
        function advancedHumanizer(text, intensity, academicLevel, useHedging, useVariation, useIdioms) {
            // Academic phrase replacements (tiered by academic level)
            const replacements = {
                1: [ // Basic
                    ["necessary", "required"],
                    ["important", "significant"],
                    ["many", "numerous"],
                    ["use", "utilize"]
                ],
                2: [ // Medium
                    ["necessitates", "requires"],
                    ["mitigate", "address"],
                    ["robust", "comprehensive"],
                    ["framework", "system"],
                    ["however", "nevertheless"],
                    ["therefore", "consequently"]
                ],
                3: [ // Advanced
                    ["aforementioned", "previously discussed"],
                    ["paradigm", "conceptual framework"],
                    ["dichotomy", "binary opposition"],
                    ["epistemological", "knowledge-related"],
                    ["ontological", "existence-related"]
                ]
            };
            
            // Discipline-specific idioms (when enabled)
            const disciplineIdioms = [
                "From a post-structuralist perspective,",
                "As Foucault observed,",
                "Building on Bourdieu's concept of cultural capital,",
                "In line with feminist epistemology,",
                "Drawing on critical race theory,"
            ];
            
            // Process text through multiple stages
            let result = text;
            
            // Stage 1: Lexical Substitution
            replacements[academicLevel].forEach(([ai, human]) => {
                const regex = new RegExp(`\\b${ai}\\b`, 'gi');
                result = result.replace(regex, human);
            });
            
            // Stage 2: Structural Variation (if enabled)
            if (useVariation) {
                const sentences = result.split(/[.!?]\s+/);
                if (sentences.length > 1) {
                    // Alternate between 4 academic sentence structures
                    const structures = [
                        (s) => s.charAt(0).toUpperCase() + s.slice(1), // Standard
                        (s) => `While ${s.toLowerCase()}, it is evident that...`, // Concessive
                        (s) => `This ${s.toLowerCase()} because...`, // Causal
                        (s) => `As research indicates, ${s.toLowerCase()}` // Evidential
                    ];
                    
                    for (let i = 0; i < sentences.length; i++) {
                        if (Math.random() < intensity * 0.7) {
                            const structure = structures[Math.floor(Math.random() * structures.length)];
                            sentences[i] = structure(sentences[i]);
                        }
                    }
                    
                    result = sentences.join('. ') + (text.endsWith('.') ? '.' : '');
                }
            }
            
            // Stage 3: Hedging (if enabled)
            if (useHedging) {
                const hedges = [
                    "It appears that ",
                    "One might argue that ",
                    "This suggests that ",
                    "There is evidence to suggest that ",
                    "Current scholarship indicates that ",
                    "It could be inferred that "
                ];
                
                // Apply hedging probabilistically based on intensity
                if (Math.random() < intensity * 0.8) {
                    const hedge = hedges[Math.floor(Math.random() * hedges.length)];
                    result = hedge + result.charAt(0).toLowerCase() + result.slice(1);
                }
            }
            
            // Stage 4: Discipline Idioms (if enabled)
            if (useIdioms && Math.random() < intensity * 0.3) {
                const idiom = disciplineIdioms[Math.floor(Math.random() * disciplineIdioms.length)];
                result = idiom + " " + result.charAt(0).toLowerCase() + result.slice(1);
            }
            
            // Stage 5: Final polishing
            // Ensure proper capitalization
            result = result.charAt(0).toUpperCase() + result.slice(1);
            
            // Add occasional (grammatically correct) interjections
            if (intensity > 0.6 && Math.random() < 0.2) {
                const interjections = ["Indeed, ", "Notably, ", "Crucially, "];
                result = interjections[Math.floor(Math.random() * interjections.length)] + result;
            }
            
            return result;
        }
    </script>
</body>
</html>
